{"version":3,"file":"jflow-vue3-plugin.min.js","sources":["../components/useStack.js","../components/useLinkStack.js","../components/event-utils.js","../components/JFlow.js","../components/JFlowInstance.js","../components/JFlowLink.js","../components/JFlowGroup.js","../components/JFlowTextGroup.js","../components/JFlowLinkGroup.js","../index.js"],"sourcesContent":["import { provide, toRaw } from 'vue'\nexport default function (_jflowInstance) {\n    // const stack = ref([]);\n    function addToStack(instance, source) {\n        _jflowInstance.addToStack(instance);\n        if(source) {\n            source = toRaw(source);\n            instance._jflow.setRenderNodeBySource(source, instance)\n        }\n    }\n    function removeFromStack(instance) {\n        _jflowInstance.removeFromStack(instance);\n    }\n\n    provide('addToStack', addToStack);\n    provide('removeFromStack', removeFromStack);\n}","import { provide } from 'vue'\nexport default function (_jflowInstance) {\n    // const stack = ref([]);\n    function addToLinkStack(link, sourceFrom, sourceTo) {\n        _jflowInstance.addToLinkStack(link);\n        if(sourceFrom && sourceTo) {\n            _jflowInstance.addLinkNodeBySource(sourceFrom, sourceTo, link);\n        }\n    }\n    function removeFromLinkStack(link, sourceFrom, sourceTo) {\n        _jflowInstance.removeFromLinkStack(link);\n        if(sourceFrom && sourceTo) {\n            _jflowInstance.removeLinkNodeBySource(sourceFrom, sourceTo, link);\n        }\n    }\n\n    provide('addToLinkStack', addToLinkStack);\n    provide('removeFromLinkStack', removeFromLinkStack);\n}","function lowerFirstLetter(string) {\n    return string.charAt(0).toLowerCase() + string.slice(1);\n}\n\nexport function bindEvent(_jflowInstance, attrs) {\n    Object.keys(attrs).map(key => {\n        if(/^on[A-Z]/.test(key)) {\n            // TODO 整理固定的 Event\n            let func = attrs[key];\n            if(Array.isArray(func)) {\n                func = func.filter(f => typeof f === 'function')\n                const reg = /^on(.*)/.exec(key);\n                if(reg[1]) {\n                    const eventName = lowerFirstLetter(reg[1]);\n                    func.forEach(f => {\n                        _jflowInstance.addEventListener(eventName, f);\n                    });\n                }\n            } else if(func && typeof func === 'function') {\n                const reg = /^on(.*)/.exec(key);\n                if(reg[1]) {\n                    _jflowInstance.addEventListener(lowerFirstLetter(reg[1]), func);\n                }\n            }\n        }\n    })\n}","\nimport {\n    ref, h, provide,\n    onBeforeMount,\n    onUnmounted,\n    nextTick,\n    toRaw\n} from \"vue\";\nimport useStack from \"./useStack\";\nimport useLinkStack from './useLinkStack';\nimport { bindEvent } from './event-utils'\nimport JFlow from '@joskii/jflow-core';\n\nexport default {\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        loading: Boolean,\n        genVueComponentKey: {\n            type: Function,\n        }\n    },\n    inheritAttrs: false,\n    setup(props, { slots, attrs, emit, expose }) {\n        const { genVueComponentKey } = props;\n        const genLinkVueComponentKey = (meta) => {\n            const k1 = genVueComponentKey(meta.from.source);\n            const k2 = genVueComponentKey(meta.to.source);\n            const k3 = meta.part;\n            return `${k1}-${k2}-${k3}`\n        }\n\n        const className = attrs.class;\n        const style = attrs.style;\n        const divEl = ref();\n        let stopLoading = false;\n        const renderNodes = ref([]);\n        const renderLinks = ref([]);\n        const _jflowInstance = new JFlow(toRaw(props.configs));\n        useStack(_jflowInstance);\n        useLinkStack(_jflowInstance);\n       \n\n        const genNodeLinkMeta = () => {\n            const nodes = _jflowInstance._layout.flowStack.map(meta => {\n                const { type, layoutNode, source } = meta;\n                const map = _jflowInstance.source_Layout_Render_NodeMap;\n                let obj;\n                const s = toRaw(source);\n                const ly = toRaw(layoutNode);\n                if(map.has(s)) {\n                    obj = map.get(s);\n                } else {\n                    obj = map.set(s);\n                }\n                obj.layoutNode = ly;\n                return meta;\n            });\n            const links = _jflowInstance._layout.flowLinkStack.slice();\n            return [ nodes, links ];\n        }\n\n        const loadingNodes = (nodes, links) => {\n            emit('update:loading', true);\n            let i = 0;\n            const tl = () => {\n                if(stopLoading) {\n                    return;\n                }\n                const end = i + 100;\n                const linkPart = links.slice(i, end);\n                if(linkPart.length) {\n                    // this.renderLinks.splice(this.renderLinks.length,  0, ...linkPart);\n                    renderLinks.value = renderLinks.value.concat(linkPart); // faster\n                    i = end;\n                    requestAnimationFrame(tl);\n                } else {\n                    requestAnimationFrame(mountJFlow.bind(this));\n                }\n            }\n            const tn = () => {\n                if(stopLoading) {\n                    return;\n                }\n                const end = i + 100;\n                const part = nodes.slice(i, end);\n                if(part.length) {\n                    // this.renderNodes.splice(this.renderNodes.length,  0, ...part);\n                    renderNodes.value = renderNodes.value.concat(part);\n                    i = end;\n                    requestAnimationFrame(tn);\n                } else {\n                    i = 0;\n                    requestAnimationFrame(tl)\n                }\n            }\n            requestAnimationFrame(tn)\n        };\n\n        onBeforeMount(() => {\n            loadingNodes(...genNodeLinkMeta());\n        });\n\n\n\n        const mountJFlow = () => {\n            if(stopLoading) {\n                return;\n            }\n            _jflowInstance.$mount(divEl.value);\n            bindEvent(_jflowInstance, attrs);\n            emit('update:loading', false)\n        }\n\n        onUnmounted(() => {\n            if(_jflowInstance.destroy) {\n                _jflowInstance.destroy(); \n            }\n            stopLoading = true;\n        })\n\n        const syncNodeLink = (nodes, links) => {\n            renderNodes.value = nodes.slice();\n            renderLinks.value = links.slice();\n        }\n\n        // syncNodeLink(...genNodeLinkMeta());\n        // nextTick(() => {\n        //     mountJFlow();\n        // })\n\n\n        const reflow = (preCallback, afterCallback) => {\n            syncNodeLink(...genNodeLinkMeta());\n            nextTick(() => {\n                if(preCallback) {\n                    preCallback();\n                }\n                _jflowInstance.recalculate();\n                _jflowInstance.scheduleRender(() => {\n                    if(afterCallback) {\n                        afterCallback();\n                    }\n                });\n\n            })\n        }\n\n        const syncLayout = () => {\n            syncNodeLink(...genNodeLinkMeta());\n        }\n\n        const getInstance = () => {\n            return _jflowInstance;\n        }\n\n\n        const renderJFlow = (() => {\n            let __renderInSchedule__ = false;\n            return () => {\n                if(__renderInSchedule__) {\n                    return;\n                }\n                __renderInSchedule__= true;\n                nextTick(() => {\n                    _jflowInstance._render();\n                    __renderInSchedule__ = false;\n                });\n            }\n        })();\n\n        provide('getJFlow', getInstance);\n        provide('renderJFlow', renderJFlow);\n\n        expose({\n            reflow,\n            renderJFlow,\n            getInstance,\n            syncLayout\n        });\n\n\n        return () => {\n            return h('div', {\n                class: className,\n                style: style,\n                ref: divEl \n            },\n            !renderNodes.value.length ? null: h('div', [\n                ...renderNodes.value.map(node => {\n                    if(!node) {\n                        return null\n                    }\n                    let { type, source, layoutNode } = node;\n                    // layoutNode = toRaw(layoutNode);\n                    if(!slots[type]) {\n                        if(slots['jflowcommon']){\n                            type = 'jflowcommon';\n                        } else {\n                            return null;\n                        }\n                    }\n                    const [vnode] = slots[type]({ source, layoutNode });\n                    vnode.key = genVueComponentKey(source);   \n                    return vnode;\n                }).filter(n => !!n),\n                ...renderLinks.value.map(meta => {\n                    let type = meta.type || 'plainlink'\n                    if(!slots[type]) {\n                        return null;\n                    }\n                    const [vnode] = slots[type]({ configs: meta });\n                    vnode.key = genLinkVueComponentKey(meta);\n                    return vnode\n                })\n\n            ]))\n        };\n    },\n}","import * as JFlowInstance from '@joskii/jflow-core';\nimport { inject, watch, onUnmounted, toRaw } from 'vue';\nimport { bindEvent } from './event-utils'\nfunction diff( a, b ){\n    return Object.keys(b).some(k => b[k] !== a[k]) || Object.keys(a).some(k => b[k] !== a[k]);\n}\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inheritAttrs: false,\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        setup(props, { attrs, expose }) {\n            const addToBelongStack = inject('addToStack');\n            const removeFromBelongStack = inject('removeFromStack');\n            const renderJFlow = inject('renderJFlow');\n            const _jflowInstance =  new builder(toRaw(props.configs));\n            bindEvent(_jflowInstance, attrs);\n            addToBelongStack(_jflowInstance, toRaw(props.source));\n            \n            const stop0 = watch(() => props.configs, (val, oldVal) => {\n                if(!diff(val, oldVal)){\n                    return;\n                }\n                _jflowInstance.setConfig(val);\n                renderJFlow();\n            });\n            const setVisible = (val) => {\n                _jflowInstance.visible = val;\n                renderJFlow();\n            }\n            const stop1 = watch(() => props.visible, setVisible);\n\n            const stop2 = watch(() => props.source, (val) => {\n                _jflowInstance._jflow.setRenderNodeBySource(toRaw(val), _jflowInstance);\n            });\n            setVisible(props.visible)\n            onUnmounted(() => {\n                stop0();\n                stop1();\n                stop2();\n                _jflowInstance.destroy();\n                removeFromBelongStack(_jflowInstance);\n            })\n\n            expose({\n                _jflowInstance,\n            });\n            return () => null;\n        }\n    }\n}","import * as JFlowInstance from '@joskii/jflow-core';\nimport { inject, watchEffect, toRaw, onUnmounted } from 'vue';\nimport { bindEvent } from './event-utils'\nconst isPrimitive = (val) => {\n    if(val === null){\n        return true\n    }\n        \n    if(typeof val == \"object\" || typeof val == \"function\"){\n        return false\n    }else{\n        return true\n    }\n}\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inheritAttrs: false,\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            from: Object,\n            to: Object,\n        },\n        setup(props, { attrs, expose }) {\n            const addToLinkStack = inject('addToLinkStack');\n            const removeFromLinkStack = inject('removeFromLinkStack');\n            const getJFlow = inject('getJFlow');\n            const renderJFlow = inject('renderJFlow');\n            const jflow = getJFlow();\n            const exposeObj = {\n                _jflowInstance: null,\n            }\n            const createInstance = (fromInstance, toInstance) => {\n                if(fromInstance && toInstance) {\n                    const _jflowInstance = new builder({\n                        ...props.configs,\n                        from: fromInstance,\n                        to: toInstance,\n                    });\n                    bindEvent(_jflowInstance, attrs);\n                    addToLinkStack(_jflowInstance, toRaw(props.from), toRaw(props.to));   \n                    exposeObj._jflowInstance = _jflowInstance\n                }\n            }\n            \n\n            const refresh = () => {\n                const fromInstance = jflow.getRenderNodeBySource(toRaw(props.from));\n                const toInstance = jflow.getRenderNodeBySource(toRaw(props.to));\n                if(!exposeObj._jflowInstance) {\n                    createInstance(fromInstance, toInstance);\n                } else {\n                    exposeObj._jflowInstance.setConfig({\n                        ...props.configs,\n                        from: fromInstance,\n                        to: toInstance,\n                    });\n                }    \n                renderJFlow();\n            }\n\n            refresh();\n            const stop = watchEffect(() => {\n                refresh();\n            }, {\n                flush: 'post',\n            })\n            onUnmounted(() => {\n                stop();\n                if(exposeObj._jflowInstance) {\n                    exposeObj._jflowInstance.destroy();\n                    removeFromLinkStack(exposeObj._jflowInstance, toRaw(props.from), toRaw(props.to));\n                }\n               \n            })\n\n            expose(exposeObj);\n            return () => null;\n        }\n    }\n}","import * as JFlowInstance from '@joskii/jflow-core';\nimport { inject, watch, h, onMounted, onUpdated, onUnmounted, toRaw } from 'vue';\nimport useStack from './useStack';\nimport { bindEvent } from './event-utils'\n\nexport default function (nameNode) {\n    const builder =  typeof nameNode === 'string'\n        ? JFlowInstance[nameNode]\n        : nameNode;\n    return {\n        inheritAttrs: false,\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            }\n        },\n        setup(props, { slots, attrs, expose }) {\n            const addToBelongStack = inject('addToStack');\n            const removeFromBelongStack = inject('removeFromStack');\n            const renderJFlow = inject('renderJFlow');\n            const _jflowInstance =  new builder(toRaw(props.configs));\n            useStack(_jflowInstance);\n            bindEvent(_jflowInstance, attrs);\n            addToBelongStack(_jflowInstance, toRaw(props.source));\n            \n            const setVisible = (val) => {\n                _jflowInstance.visible = val;\n                renderJFlow();\n            }\n            const stop0 = watch(() => props.configs, (val, oldVal) => {\n                if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                    return;\n                }\n                _jflowInstance.setConfig(val);\n                renderJFlow();\n            });\n\n            const stop1 = watch(() => props.visible, setVisible);\n\n            const stop2 = watch(() => props.source, (val) => {\n                _jflowInstance._jflow.setRenderNodeBySource(toRaw(val), _jflowInstance);\n            });\n\n            setVisible(props.visible)\n\n            onMounted(() => {\n                _jflowInstance.recalculate()\n            });\n            onUpdated(() => {\n                _jflowInstance.recalculateUp()\n            });\n            onUnmounted(() => {\n                stop0();\n                stop1();\n                stop2();\n                _jflowInstance.destroy();\n                removeFromBelongStack(_jflowInstance);\n            })\n\n            expose({\n                _jflowInstance,\n            });\n            \n            return () => h('jflow-group', slots.default())\n        }\n    }\n}","import {\n    ref, h,\n    nextTick,\n    toRaw,\n    inject,\n    watch,\n    onMounted,\n    onUpdated,\n    onUnmounted,\n} from \"vue\";\nimport { TextGroup } from '@joskii/jflow-core';\nimport useStack from \"./useStack\";\nimport { bindEvent } from './event-utils'\n\nexport default {\n    props: {\n        configs: {\n            type: Object,\n            default: function () {\n                return {};\n            },\n        },\n        visible: {\n            type: Boolean,\n            default: true,\n        },\n        source: {\n            type: Object,\n        },\n        genVueComponentKey: {\n            type: Function,\n        }\n    },\n    inheritAttrs: false,\n    setup(props, { slots, attrs, emit, expose }) {\n        const { genVueComponentKey } = props;\n\n        const addToBelongStack = inject('addToStack');\n        const removeFromBelongStack = inject('removeFromStack');\n        const renderJFlow = inject('renderJFlow');\n        const renderNodes = ref([]);\n\n        const _jflowInstance = new TextGroup(toRaw(props.configs));\n        useStack(_jflowInstance);\n        bindEvent(_jflowInstance, attrs);\n        addToBelongStack(_jflowInstance, toRaw(props.source));\n\n        const setVisible = (val) => {\n            _jflowInstance.visible = val;\n            renderJFlow();\n        }\n        \n        const stop0 = watch(() => props.configs, (val, oldVal) => {\n            if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                return;\n            }\n            _jflowInstance.setConfig(val);\n            renderJFlow();\n        });\n\n        const stop1 = watch(() => props.visible, setVisible);\n\n        const stop2 = watch(() => props.source, (val) => {\n            _jflowInstance._jflow.setRenderNodeBySource(toRaw(val), _jflowInstance);\n        });\n        setVisible(props.visible);\n\n        const genTextElementMeta = () => {\n            renderNodes.value = _jflowInstance._flattenTxtElem.filter(elem => elem.type !== 'text');\n        }\n        genTextElementMeta();\n\n        const reflow = () => {\n            _jflowInstance.refreshTextElements();\n            genTextElementMeta();\n            nextTick(() => {\n                _jflowInstance.refresh();\n            })\n        }\n\n        onMounted(() => {\n            _jflowInstance.recalculate()\n        });\n        onUpdated(() => {\n            _jflowInstance.recalculateUp()\n        });\n        onUnmounted(() => {\n            stop0();\n            stop1();\n            stop2();\n            _jflowInstance.destroy();\n            removeFromBelongStack(_jflowInstance);\n        })\n\n        expose({\n            _jflowInstance,\n            reflow,\n        });\n        \n        return () => {\n            if(renderNodes.value.length === 0) {\n                return h('jflow-group');\n            }\n            return h('div', renderNodes.value.map(textElement => {\n                let { type, source } = textElement;\n                if(!slots[type]) {\n                    if(slots['jflowcommon']){\n                        type = 'jflowcommon';\n                    } else {\n                        return null;\n                    }\n                }\n                const [vnode] = slots[type]({ source, textElement });\n                vnode.key = genVueComponentKey(source);   \n                return vnode;\n            }).filter(n => !!n))\n        }\n    }\n}","import { inject, watch, onMounted, onUpdated, onUnmounted, toRaw, ref, h } from 'vue';\nimport useStack from './useStack';\nimport { bindEvent } from './event-utils'\n\nexport default function (builder) {\n    return {\n        inheritAttrs: false,\n        props: {\n            configs: {\n                type: Object,\n                default: function () {\n                    return {};\n                },\n            },\n            visible: {\n                type: Boolean,\n                default: true,\n            },\n            source: {\n                type: Object,\n            },\n            genVueComponentKey: {\n                type: Function,\n            }\n        },\n        setup(props, { attrs, slots, expose }) {\n            const addToBelongStack = inject('addToStack');\n            const removeFromBelongStack = inject('removeFromStack');\n            const renderJFlow = inject('renderJFlow');\n            const _jflowInstance =  new builder(props.configs);\n            useStack(_jflowInstance);\n            bindEvent(_jflowInstance, attrs);\n            addToBelongStack(_jflowInstance, toRaw(props.source));\n            const renderLinks = ref([]);\n            const genLinks = () => {\n                renderLinks.value = _jflowInstance._layout.flowLinkStack.slice();\n            }\n            genLinks();\n            const setVisible = (val) => {\n                _jflowInstance.visible = val;\n                renderJFlow();\n            }\n            const stop0 = watch(() => props.configs, (val, oldVal) => {\n                if(JSON.stringify(val) === JSON.stringify(oldVal)){\n                    return;\n                }\n                _jflowInstance.setConfig(val);\n                renderJFlow();\n            });\n            const stop1 = watch(() => props.visible, setVisible)\n\n            const stop2 = watch(() => props.source, (val) => {\n                _jflowInstance._jflow.setRenderNodeBySource(toRaw(val), _jflowInstance);\n            });\n\n            setVisible(props.visible)\n            \n            onMounted(() => {\n                _jflowInstance.recalculate()\n            });\n            onUpdated(() => {\n                _jflowInstance.recalculateUp()\n            });\n            onUnmounted(() => {\n                stop0();\n                stop1();\n                stop2();\n                _jflowInstance.destroy();\n                removeFromBelongStack(_jflowInstance);\n            });\n            const getLinkName = (link) => {\n                const type = link.type\n                if(!slots[type]) {\n                    return 'plainlink'\n                }\n                return type;\n            }\n            const genLinkVueComponentKey = (meta) => {\n                const k1 = props.genVueComponentKey(meta.from.source);\n                const k2 = props.genVueComponentKey(meta.to.source);\n                const k3 = meta.part;\n                return `${k1}-${k2}-${k3}`\n            }\n\n            expose({\n                genLinks,\n                _jflowInstance,\n            });\n\n            return () => h('jflow-group', [\n                ...slots.default(),\n                ...renderLinks.value.map(meta => {\n                    const type = getLinkName(meta);\n                    if(!slots[type]) {\n                        return null;\n                    }\n                    const vnode = slots[type]({ \n                        configs: meta \n                    });\n                    vnode.key = genLinkVueComponentKey(meta);\n                    return vnode;\n                })\n            ])\n        }\n    }\n}","import JFlowComponent from './components/JFlow.js';\nimport JFlowInstance from './components/JFlowInstance';\nimport JFlowLink from './components/JFlowLink';\nimport JFlowGroup from './components/JFlowGroup';\nimport JFlowTextGroup from './components/JFlowTextGroup';\n\nconst JFLOW_NODES = [\n    'Point',\n    'Rectangle',\n    'Capsule',\n    'Diamond',\n    'Rhombus',\n    'Text',\n    'Icon',\n    'ShadowDom',\n    'TextEditor',\n];\nconst JFLOW_LINKS = [\n    'Link',\n    'PolyLink',\n    'BezierLink'\n]\nconst JFLOW_GROUPS = [\n    'CapsuleGroup',\n    'CapsuleVerticalGroup',\n    'DiamondGroup',\n    'DiamondVerticalGroup',\n    'RhombusGroup',\n    'PointGroup',\n    'ScrollGroup',\n]\n\nconst components = [\n    {\n        name: 'Jflow',\n        component: JFlowComponent,\n    },\n    {\n        name: 'Group',\n        component: JFlowGroup('Group'),\n    }, \n    ...JFLOW_GROUPS.map(name => ({\n        name,\n        component: JFlowGroup(name)\n    })),\n    ...JFLOW_NODES.map(name => ({\n        name,\n        component: JFlowInstance(name)\n    })),\n    ...JFLOW_LINKS.map(name => ({\n        name,\n        component: JFlowLink(name)\n    })),\n    {\n        name: 'TextGroup',\n        component: JFlowTextGroup\n    }\n];\nconst componentPrefix = 'j';\ncustomElements.define('jflow-group', class extends HTMLElement {\n    constructor() {\n        super();\n        this.attachShadow({mode: 'open'});\n    }\n});\n/**\n * @module JFlowVuePlugin \n */\nexport const JFlowVuePlugin = {\n    /**\n     * 安装 JFlowVuePlugin\n     * @function\n     * @param {Vue} Vue - Vue\n     * @param {Object} options - Vue plugin 配置\n     * @param {string} options.prefix - 组件前缀，默认是 j\n     * @param {Object} options.custom - 自定义组件，形式为 { key: {@link:Instance} }\n     */\n    install: (Vue, options = {}) => {\n        let prefixToUse = componentPrefix;\n        if(options && options.prefix){\n            prefixToUse = options.prefix;\n        };\n        components.forEach(k => {\n            Vue.component(`${prefixToUse}${k.name}`, k.component);\n        });\n\n        if(options.customInstance) {\n            Object.keys(options.customInstance).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowInstance(options.customInstance[name]));\n            })\n        }\n        if(options.customGroups) {\n            Object.keys(options.customGroups).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowGroup(options.customGroups[name]));\n            })\n        }\n        if(options.customLink) {\n            Object.keys(options.customLink).forEach(name => {\n                Vue.component(`${prefixToUse}${name}`, JFlowLink(options.customLink[name]));\n            })\n        }\n    }\n}\n\nexport { default as JFlowLinkGroup } from './components/JFlowLinkGroup';\n"],"names":["_jflowInstance","addToStack","instance","source","toRaw","_jflow","setRenderNodeBySource","removeFromStack","provide","addToLinkStack","link","sourceFrom","sourceTo","addLinkNodeBySource","removeFromLinkStack","removeLinkNodeBySource","lowerFirstLetter","string","charAt","toLowerCase","slice","bindEvent","attrs","Object","keys","map","key","test","func","Array","isArray","filter","f","reg","exec","eventName","forEach","addEventListener","props","configs","type","_default","loading","Boolean","genVueComponentKey","Function","inheritAttrs","setup","_ref","_this","slots","emit","expose","genLinkVueComponentKey","meta","k1","from","k2","to","k3","part","concat","className","style","divEl","ref","stopLoading","renderNodes","renderLinks","JFlow","useStack","useLinkStack","genNodeLinkMeta","nodes","_layout","flowStack","layoutNode","source_Layout_Render_NodeMap","obj","s","ly","has","get","set","links","flowLinkStack","loadingNodes","i","tl","end","linkPart","length","value","requestAnimationFrame","mountJFlow","bind","tn","onBeforeMount","apply","_toConsumableArray","$mount","onUnmounted","destroy","syncNodeLink","reflow","preCallback","afterCallback","nextTick","recalculate","scheduleRender","syncLayout","getInstance","renderJFlow","__renderInSchedule__","_render","h","node","_slots$type","_slots$type2","_slicedToArray","vnode","n","_slots$type3","_slots$type4","diff","a","b","some","k","nameNode","builder","JFlowInstance","visible","addToBelongStack","inject","removeFromBelongStack","stop0","watch","val","oldVal","setConfig","setVisible","stop1","stop2","getJFlow","jflow","exposeObj","createInstance","fromInstance","toInstance","_objectSpread","refresh","getRenderNodeBySource","stop","watchEffect","flush","JSON","stringify","onMounted","onUpdated","recalculateUp","TextGroup","genTextElementMeta","_flattenTxtElem","elem","refreshTextElements","textElement","genLinks","getLinkName","JFLOW_NODES","JFLOW_LINKS","JFLOW_GROUPS","components","name","component","JFlowComponent","JFlowGroup","JFlowLink","JFlowTextGroup","componentPrefix","customElements","define","_HTMLElement","_inherits","_class","_super","_createSuper","_classCallCheck","call","attachShadow","mode","_createClass","_wrapNativeSuper","HTMLElement","JFlowVuePlugin","install","Vue","options","arguments","undefined","prefixToUse","prefix","customInstance","customGroups","customLink"],"mappings":"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"}